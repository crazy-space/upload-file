var Xi=Object.create;var Mr=Object.defineProperty;var Ki=Object.getOwnPropertyDescriptor;var Zi=Object.getOwnPropertyNames;var eo=Object.getPrototypeOf,ro=Object.prototype.hasOwnProperty;var h=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var to=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of Zi(r))!ro.call(e,i)&&i!==t&&Mr(e,i,{get:()=>r[i],enumerable:!(n=Ki(r,i))||n.enumerable});return e};var Q=(e,r,t)=>(t=e!=null?Xi(eo(e)):{},to(r||!e||!e.__esModule?Mr(t,"default",{value:e,enumerable:!0}):t,e));var U=h(tr=>{"use strict";tr.fromCallback=function(e){return Object.defineProperty(function(...r){if(typeof r[r.length-1]=="function")e.apply(this,r);else return new Promise((t,n)=>{e.call(this,...r,(i,o)=>i!=null?n(i):t(o))})},"name",{value:e.name})};tr.fromPromise=function(e){return Object.defineProperty(function(...r){let t=r[r.length-1];if(typeof t!="function")return e.apply(this,r);e.apply(this,r.slice(0,-1)).then(n=>t(null,n),t)},"name",{value:e.name})}});var Ur=h((ls,jr)=>{var X=require("constants"),no=process.cwd,Te=null,io=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Te||(Te=no.call(process)),Te};try{process.cwd()}catch{}typeof process.chdir=="function"&&(nr=process.chdir,process.chdir=function(e){Te=null,nr.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,nr));var nr;jr.exports=oo;function oo(e){X.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&r(e),e.lutimes||t(e),e.chown=o(e.chown),e.fchown=o(e.fchown),e.lchown=o(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=a(e.chownSync),e.fchownSync=a(e.fchownSync),e.lchownSync=a(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=u(e.stat),e.fstat=u(e.fstat),e.lstat=u(e.lstat),e.statSync=c(e.statSync),e.fstatSync=c(e.fstatSync),e.lstatSync=c(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(s,l,f){f&&process.nextTick(f)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(s,l,f,m){m&&process.nextTick(m)},e.lchownSync=function(){}),io==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(s){function l(f,m,p){var d=Date.now(),E=0;s(f,m,function v(T){if(T&&(T.code==="EACCES"||T.code==="EPERM")&&Date.now()-d<6e4){setTimeout(function(){e.stat(m,function(D,ye){D&&D.code==="ENOENT"?s(f,m,v):p(T)})},E),E<100&&(E+=10);return}p&&p(T)})}return Object.setPrototypeOf&&Object.setPrototypeOf(l,s),l}(e.rename)),e.read=typeof e.read!="function"?e.read:function(s){function l(f,m,p,d,E,v){var T;if(v&&typeof v=="function"){var D=0;T=function(ye,Ar,Ir){if(ye&&ye.code==="EAGAIN"&&D<10)return D++,s.call(e,f,m,p,d,E,T);v.apply(this,arguments)}}return s.call(e,f,m,p,d,E,T)}return Object.setPrototypeOf&&Object.setPrototypeOf(l,s),l}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(s){return function(l,f,m,p,d){for(var E=0;;)try{return s.call(e,l,f,m,p,d)}catch(v){if(v.code==="EAGAIN"&&E<10){E++;continue}throw v}}}(e.readSync);function r(s){s.lchmod=function(l,f,m){s.open(l,X.O_WRONLY|X.O_SYMLINK,f,function(p,d){if(p){m&&m(p);return}s.fchmod(d,f,function(E){s.close(d,function(v){m&&m(E||v)})})})},s.lchmodSync=function(l,f){var m=s.openSync(l,X.O_WRONLY|X.O_SYMLINK,f),p=!0,d;try{d=s.fchmodSync(m,f),p=!1}finally{if(p)try{s.closeSync(m)}catch{}else s.closeSync(m)}return d}}function t(s){X.hasOwnProperty("O_SYMLINK")&&s.futimes?(s.lutimes=function(l,f,m,p){s.open(l,X.O_SYMLINK,function(d,E){if(d){p&&p(d);return}s.futimes(E,f,m,function(v){s.close(E,function(T){p&&p(v||T)})})})},s.lutimesSync=function(l,f,m){var p=s.openSync(l,X.O_SYMLINK),d,E=!0;try{d=s.futimesSync(p,f,m),E=!1}finally{if(E)try{s.closeSync(p)}catch{}else s.closeSync(p)}return d}):s.futimes&&(s.lutimes=function(l,f,m,p){p&&process.nextTick(p)},s.lutimesSync=function(){})}function n(s){return s&&function(l,f,m){return s.call(e,l,f,function(p){y(p)&&(p=null),m&&m.apply(this,arguments)})}}function i(s){return s&&function(l,f){try{return s.call(e,l,f)}catch(m){if(!y(m))throw m}}}function o(s){return s&&function(l,f,m,p){return s.call(e,l,f,m,function(d){y(d)&&(d=null),p&&p.apply(this,arguments)})}}function a(s){return s&&function(l,f,m){try{return s.call(e,l,f,m)}catch(p){if(!y(p))throw p}}}function u(s){return s&&function(l,f,m){typeof f=="function"&&(m=f,f=null);function p(d,E){E&&(E.uid<0&&(E.uid+=4294967296),E.gid<0&&(E.gid+=4294967296)),m&&m.apply(this,arguments)}return f?s.call(e,l,f,p):s.call(e,l,p)}}function c(s){return s&&function(l,f){var m=f?s.call(e,l,f):s.call(e,l);return m&&(m.uid<0&&(m.uid+=4294967296),m.gid<0&&(m.gid+=4294967296)),m}}function y(s){if(!s||s.code==="ENOSYS")return!0;var l=!process.getuid||process.getuid()!==0;return!!(l&&(s.code==="EINVAL"||s.code==="EPERM"))}}});var Hr=h((ds,Br)=>{var $r=require("stream").Stream;Br.exports=ao;function ao(e){return{ReadStream:r,WriteStream:t};function r(n,i){if(!(this instanceof r))return new r(n,i);$r.call(this);var o=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var a=Object.keys(i),u=0,c=a.length;u<c;u++){var y=a[u];this[y]=i[y]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){o._read()});return}e.open(this.path,this.flags,this.mode,function(s,l){if(s){o.emit("error",s),o.readable=!1;return}o.fd=l,o.emit("open",l),o._read()})}function t(n,i){if(!(this instanceof t))return new t(n,i);$r.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),a=0,u=o.length;a<u;a++){var c=o[a];this[c]=i[c]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var Vr=h((ms,Wr)=>{"use strict";Wr.exports=so;var uo=Object.getPrototypeOf||function(e){return e.__proto__};function so(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var r={__proto__:uo(e)};else var r=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}),r}});var I=h((ys,ar)=>{var b=require("fs"),co=Ur(),fo=Hr(),lo=Vr(),De=require("util"),R,qe;typeof Symbol=="function"&&typeof Symbol.for=="function"?(R=Symbol.for("graceful-fs.queue"),qe=Symbol.for("graceful-fs.previous")):(R="___graceful-fs.queue",qe="___graceful-fs.previous");function mo(){}function Yr(e,r){Object.defineProperty(e,R,{get:function(){return r}})}var ne=mo;De.debuglog?ne=De.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(ne=function(){var e=De.format.apply(De,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});b[R]||(Jr=global[R]||[],Yr(b,Jr),b.close=function(e){function r(t,n){return e.call(b,t,function(i){i||zr(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(r,qe,{value:e}),r}(b.close),b.closeSync=function(e){function r(t){e.apply(b,arguments),zr()}return Object.defineProperty(r,qe,{value:e}),r}(b.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){ne(b[R]),require("assert").equal(b[R].length,0)}));var Jr;global[R]||Yr(global,b[R]);ar.exports=ir(lo(b));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!b.__patched&&(ar.exports=ir(b),b.__patched=!0);function ir(e){co(e),e.gracefulify=ir,e.createReadStream=Ar,e.createWriteStream=Ir;var r=e.readFile;e.readFile=t;function t(S,w,g){return typeof w=="function"&&(g=w,w=null),C(S,w,g);function C(_,N,P,O){return r(_,N,function(F){F&&(F.code==="EMFILE"||F.code==="ENFILE")?ce([C,[_,N,P],F,O||Date.now(),Date.now()]):typeof P=="function"&&P.apply(this,arguments)})}}var n=e.writeFile;e.writeFile=i;function i(S,w,g,C){return typeof g=="function"&&(C=g,g=null),_(S,w,g,C);function _(N,P,O,F,L){return n(N,P,O,function(k){k&&(k.code==="EMFILE"||k.code==="ENFILE")?ce([_,[N,P,O,F],k,L||Date.now(),Date.now()]):typeof F=="function"&&F.apply(this,arguments)})}}var o=e.appendFile;o&&(e.appendFile=a);function a(S,w,g,C){return typeof g=="function"&&(C=g,g=null),_(S,w,g,C);function _(N,P,O,F,L){return o(N,P,O,function(k){k&&(k.code==="EMFILE"||k.code==="ENFILE")?ce([_,[N,P,O,F],k,L||Date.now(),Date.now()]):typeof F=="function"&&F.apply(this,arguments)})}}var u=e.copyFile;u&&(e.copyFile=c);function c(S,w,g,C){return typeof g=="function"&&(C=g,g=0),_(S,w,g,C);function _(N,P,O,F,L){return u(N,P,O,function(k){k&&(k.code==="EMFILE"||k.code==="ENFILE")?ce([_,[N,P,O,F],k,L||Date.now(),Date.now()]):typeof F=="function"&&F.apply(this,arguments)})}}var y=e.readdir;e.readdir=l;var s=/^v[0-5]\./;function l(S,w,g){typeof w=="function"&&(g=w,w=null);var C=s.test(process.version)?function(P,O,F,L){return y(P,_(P,O,F,L))}:function(P,O,F,L){return y(P,O,_(P,O,F,L))};return C(S,w,g);function _(N,P,O,F){return function(L,k){L&&(L.code==="EMFILE"||L.code==="ENFILE")?ce([C,[N,P,O],L,F||Date.now(),Date.now()]):(k&&k.sort&&k.sort(),typeof O=="function"&&O.call(this,L,k))}}}if(process.version.substr(0,4)==="v0.8"){var f=fo(e);v=f.ReadStream,D=f.WriteStream}var m=e.ReadStream;m&&(v.prototype=Object.create(m.prototype),v.prototype.open=T);var p=e.WriteStream;p&&(D.prototype=Object.create(p.prototype),D.prototype.open=ye),Object.defineProperty(e,"ReadStream",{get:function(){return v},set:function(S){v=S},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return D},set:function(S){D=S},enumerable:!0,configurable:!0});var d=v;Object.defineProperty(e,"FileReadStream",{get:function(){return d},set:function(S){d=S},enumerable:!0,configurable:!0});var E=D;Object.defineProperty(e,"FileWriteStream",{get:function(){return E},set:function(S){E=S},enumerable:!0,configurable:!0});function v(S,w){return this instanceof v?(m.apply(this,arguments),this):v.apply(Object.create(v.prototype),arguments)}function T(){var S=this;rr(S.path,S.flags,S.mode,function(w,g){w?(S.autoClose&&S.destroy(),S.emit("error",w)):(S.fd=g,S.emit("open",g),S.read())})}function D(S,w){return this instanceof D?(p.apply(this,arguments),this):D.apply(Object.create(D.prototype),arguments)}function ye(){var S=this;rr(S.path,S.flags,S.mode,function(w,g){w?(S.destroy(),S.emit("error",w)):(S.fd=g,S.emit("open",g))})}function Ar(S,w){return new e.ReadStream(S,w)}function Ir(S,w){return new e.WriteStream(S,w)}var Qi=e.open;e.open=rr;function rr(S,w,g,C){return typeof g=="function"&&(C=g,g=null),_(S,w,g,C);function _(N,P,O,F,L){return Qi(N,P,O,function(k,ss){k&&(k.code==="EMFILE"||k.code==="ENFILE")?ce([_,[N,P,O,F],k,L||Date.now(),Date.now()]):typeof F=="function"&&F.apply(this,arguments)})}}return e}function ce(e){ne("ENQUEUE",e[0].name,e[1]),b[R].push(e),or()}var Ne;function zr(){for(var e=Date.now(),r=0;r<b[R].length;++r)b[R][r].length>2&&(b[R][r][3]=e,b[R][r][4]=e);or()}function or(){if(clearTimeout(Ne),Ne=void 0,b[R].length!==0){var e=b[R].shift(),r=e[0],t=e[1],n=e[2],i=e[3],o=e[4];if(i===void 0)ne("RETRY",r.name,t),r.apply(null,t);else if(Date.now()-i>=6e4){ne("TIMEOUT",r.name,t);var a=t.pop();typeof a=="function"&&a.call(null,n)}else{var u=Date.now()-o,c=Math.max(o-i,1),y=Math.min(c*1.2,100);u>=y?(ne("RETRY",r.name,t),r.apply(null,t.concat([i]))):b[R].push(e)}Ne===void 0&&(Ne=setTimeout(or,0))}}});var ie=h(K=>{"use strict";var Gr=U().fromCallback,$=I(),yo=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof $[e]=="function");Object.assign(K,$);yo.forEach(e=>{K[e]=Gr($[e])});K.exists=function(e,r){return typeof r=="function"?$.exists(e,r):new Promise(t=>$.exists(e,t))};K.read=function(e,r,t,n,i,o){return typeof o=="function"?$.read(e,r,t,n,i,o):new Promise((a,u)=>{$.read(e,r,t,n,i,(c,y,s)=>{if(c)return u(c);a({bytesRead:y,buffer:s})})})};K.write=function(e,r,...t){return typeof t[t.length-1]=="function"?$.write(e,r,...t):new Promise((n,i)=>{$.write(e,r,...t,(o,a,u)=>{if(o)return i(o);n({bytesWritten:a,buffer:u})})})};typeof $.writev=="function"&&(K.writev=function(e,r,...t){return typeof t[t.length-1]=="function"?$.writev(e,r,...t):new Promise((n,i)=>{$.writev(e,r,...t,(o,a,u)=>{if(o)return i(o);n({bytesWritten:a,buffers:u})})})});typeof $.realpath.native=="function"?K.realpath.native=Gr($.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var Xr=h((ps,Qr)=>{"use strict";var ho=require("path");Qr.exports.checkPath=function(r){if(process.platform==="win32"&&/[<>:"|?*]/.test(r.replace(ho.parse(r).root,""))){let n=new Error(`Path contains invalid characters: ${r}`);throw n.code="EINVAL",n}}});var rt=h((vs,ur)=>{"use strict";var Kr=ie(),{checkPath:Zr}=Xr(),et=e=>{let r={mode:511};return typeof e=="number"?e:{...r,...e}.mode};ur.exports.makeDir=async(e,r)=>(Zr(e),Kr.mkdir(e,{mode:et(r),recursive:!0}));ur.exports.makeDirSync=(e,r)=>(Zr(e),Kr.mkdirSync(e,{mode:et(r),recursive:!0}))});var W=h((Ss,tt)=>{"use strict";var po=U().fromPromise,{makeDir:vo,makeDirSync:sr}=rt(),cr=po(vo);tt.exports={mkdirs:cr,mkdirsSync:sr,mkdirp:cr,mkdirpSync:sr,ensureDir:cr,ensureDirSync:sr}});var Z=h((Es,it)=>{"use strict";var So=U().fromPromise,nt=ie();function Eo(e){return nt.access(e).then(()=>!0).catch(()=>!1)}it.exports={pathExists:So(Eo),pathExistsSync:nt.existsSync}});var fr=h((gs,ot)=>{"use strict";var fe=I();function go(e,r,t,n){fe.open(e,"r+",(i,o)=>{if(i)return n(i);fe.futimes(o,r,t,a=>{fe.close(o,u=>{n&&n(a||u)})})})}function wo(e,r,t){let n=fe.openSync(e,"r+");return fe.futimesSync(n,r,t),fe.closeSync(n)}ot.exports={utimesMillis:go,utimesMillisSync:wo}});var oe=h((ws,st)=>{"use strict";var le=ie(),q=require("path"),xo=require("util");function Fo(e,r,t){let n=t.dereference?i=>le.stat(i,{bigint:!0}):i=>le.lstat(i,{bigint:!0});return Promise.all([n(e),n(r).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,o])=>({srcStat:i,destStat:o}))}function ko(e,r,t){let n,i=t.dereference?a=>le.statSync(a,{bigint:!0}):a=>le.lstatSync(a,{bigint:!0}),o=i(e);try{n=i(r)}catch(a){if(a.code==="ENOENT")return{srcStat:o,destStat:null};throw a}return{srcStat:o,destStat:n}}function Po(e,r,t,n,i){xo.callbackify(Fo)(e,r,n,(o,a)=>{if(o)return i(o);let{srcStat:u,destStat:c}=a;if(c){if(he(u,c)){let y=q.basename(e),s=q.basename(r);return t==="move"&&y!==s&&y.toLowerCase()===s.toLowerCase()?i(null,{srcStat:u,destStat:c,isChangingCase:!0}):i(new Error("Source and destination must not be the same."))}if(u.isDirectory()&&!c.isDirectory())return i(new Error(`Cannot overwrite non-directory '${r}' with directory '${e}'.`));if(!u.isDirectory()&&c.isDirectory())return i(new Error(`Cannot overwrite directory '${r}' with non-directory '${e}'.`))}return u.isDirectory()&&lr(e,r)?i(new Error(Ce(e,r,t))):i(null,{srcStat:u,destStat:c})})}function bo(e,r,t,n){let{srcStat:i,destStat:o}=ko(e,r,n);if(o){if(he(i,o)){let a=q.basename(e),u=q.basename(r);if(t==="move"&&a!==u&&a.toLowerCase()===u.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${r}' with directory '${e}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${r}' with non-directory '${e}'.`)}if(i.isDirectory()&&lr(e,r))throw new Error(Ce(e,r,t));return{srcStat:i,destStat:o}}function at(e,r,t,n,i){let o=q.resolve(q.dirname(e)),a=q.resolve(q.dirname(t));if(a===o||a===q.parse(a).root)return i();le.stat(a,{bigint:!0},(u,c)=>u?u.code==="ENOENT"?i():i(u):he(r,c)?i(new Error(Ce(e,t,n))):at(e,r,a,n,i))}function ut(e,r,t,n){let i=q.resolve(q.dirname(e)),o=q.resolve(q.dirname(t));if(o===i||o===q.parse(o).root)return;let a;try{a=le.statSync(o,{bigint:!0})}catch(u){if(u.code==="ENOENT")return;throw u}if(he(r,a))throw new Error(Ce(e,t,n));return ut(e,r,o,n)}function he(e,r){return r.ino&&r.dev&&r.ino===e.ino&&r.dev===e.dev}function lr(e,r){let t=q.resolve(e).split(q.sep).filter(i=>i),n=q.resolve(r).split(q.sep).filter(i=>i);return t.reduce((i,o,a)=>i&&n[a]===o,!0)}function Ce(e,r,t){return`Cannot ${t} '${e}' to a subdirectory of itself, '${r}'.`}st.exports={checkPaths:Po,checkPathsSync:bo,checkParentPaths:at,checkParentPathsSync:ut,isSrcSubdir:lr,areIdentical:he}});var pt=h((xs,ht)=>{"use strict";var B=I(),pe=require("path"),Oo=W().mkdirs,To=Z().pathExists,Do=fr().utimesMillis,ve=oe();function No(e,r,t,n){typeof t=="function"&&!n?(n=t,t={}):typeof t=="function"&&(t={filter:t}),n=n||function(){},t=t||{},t.clobber="clobber"in t?!!t.clobber:!0,t.overwrite="overwrite"in t?!!t.overwrite:t.clobber,t.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),ve.checkPaths(e,r,"copy",t,(i,o)=>{if(i)return n(i);let{srcStat:a,destStat:u}=o;ve.checkParentPaths(e,a,r,"copy",c=>c?n(c):t.filter?lt(ct,u,e,r,t,n):ct(u,e,r,t,n))})}function ct(e,r,t,n,i){let o=pe.dirname(t);To(o,(a,u)=>{if(a)return i(a);if(u)return _e(e,r,t,n,i);Oo(o,c=>c?i(c):_e(e,r,t,n,i))})}function lt(e,r,t,n,i,o){Promise.resolve(i.filter(t,n)).then(a=>a?e(r,t,n,i,o):o(),a=>o(a))}function qo(e,r,t,n,i){return n.filter?lt(_e,e,r,t,n,i):_e(e,r,t,n,i)}function _e(e,r,t,n,i){(n.dereference?B.stat:B.lstat)(r,(a,u)=>a?i(a):u.isDirectory()?Mo(u,e,r,t,n,i):u.isFile()||u.isCharacterDevice()||u.isBlockDevice()?Co(u,e,r,t,n,i):u.isSymbolicLink()?$o(e,r,t,n,i):u.isSocket()?i(new Error(`Cannot copy a socket file: ${r}`)):u.isFIFO()?i(new Error(`Cannot copy a FIFO pipe: ${r}`)):i(new Error(`Unknown file: ${r}`)))}function Co(e,r,t,n,i,o){return r?_o(e,t,n,i,o):dt(e,t,n,i,o)}function _o(e,r,t,n,i){if(n.overwrite)B.unlink(t,o=>o?i(o):dt(e,r,t,n,i));else return n.errorOnExist?i(new Error(`'${t}' already exists`)):i()}function dt(e,r,t,n,i){B.copyFile(r,t,o=>o?i(o):n.preserveTimestamps?Lo(e.mode,r,t,i):Le(t,e.mode,i))}function Lo(e,r,t,n){return Ro(e)?Ao(t,e,i=>i?n(i):ft(e,r,t,n)):ft(e,r,t,n)}function Ro(e){return(e&128)===0}function Ao(e,r,t){return Le(e,r|128,t)}function ft(e,r,t,n){Io(r,t,i=>i?n(i):Le(t,e,n))}function Le(e,r,t){return B.chmod(e,r,t)}function Io(e,r,t){B.stat(e,(n,i)=>n?t(n):Do(r,i.atime,i.mtime,t))}function Mo(e,r,t,n,i,o){return r?mt(t,n,i,o):jo(e.mode,t,n,i,o)}function jo(e,r,t,n,i){B.mkdir(t,o=>{if(o)return i(o);mt(r,t,n,a=>a?i(a):Le(t,e,i))})}function mt(e,r,t,n){B.readdir(e,(i,o)=>i?n(i):yt(o,e,r,t,n))}function yt(e,r,t,n,i){let o=e.pop();return o?Uo(e,o,r,t,n,i):i()}function Uo(e,r,t,n,i,o){let a=pe.join(t,r),u=pe.join(n,r);ve.checkPaths(a,u,"copy",i,(c,y)=>{if(c)return o(c);let{destStat:s}=y;qo(s,a,u,i,l=>l?o(l):yt(e,t,n,i,o))})}function $o(e,r,t,n,i){B.readlink(r,(o,a)=>{if(o)return i(o);if(n.dereference&&(a=pe.resolve(process.cwd(),a)),e)B.readlink(t,(u,c)=>u?u.code==="EINVAL"||u.code==="UNKNOWN"?B.symlink(a,t,i):i(u):(n.dereference&&(c=pe.resolve(process.cwd(),c)),ve.isSrcSubdir(a,c)?i(new Error(`Cannot copy '${a}' to a subdirectory of itself, '${c}'.`)):e.isDirectory()&&ve.isSrcSubdir(c,a)?i(new Error(`Cannot overwrite '${c}' with '${a}'.`)):Bo(a,t,i)));else return B.symlink(a,t,i)})}function Bo(e,r,t){B.unlink(r,n=>n?t(n):B.symlink(e,r,t))}ht.exports=No});var wt=h((Fs,gt)=>{"use strict";var A=I(),Se=require("path"),Ho=W().mkdirsSync,Wo=fr().utimesMillisSync,Ee=oe();function Vo(e,r,t){typeof t=="function"&&(t={filter:t}),t=t||{},t.clobber="clobber"in t?!!t.clobber:!0,t.overwrite="overwrite"in t?!!t.overwrite:t.clobber,t.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:n,destStat:i}=Ee.checkPathsSync(e,r,"copy",t);return Ee.checkParentPathsSync(e,n,r,"copy"),Jo(i,e,r,t)}function Jo(e,r,t,n){if(n.filter&&!n.filter(r,t))return;let i=Se.dirname(t);return A.existsSync(i)||Ho(i),vt(e,r,t,n)}function zo(e,r,t,n){if(!(n.filter&&!n.filter(r,t)))return vt(e,r,t,n)}function vt(e,r,t,n){let o=(n.dereference?A.statSync:A.lstatSync)(r);if(o.isDirectory())return ea(o,e,r,t,n);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return Yo(o,e,r,t,n);if(o.isSymbolicLink())return na(e,r,t,n);throw o.isSocket()?new Error(`Cannot copy a socket file: ${r}`):o.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${r}`):new Error(`Unknown file: ${r}`)}function Yo(e,r,t,n,i){return r?Go(e,t,n,i):St(e,t,n,i)}function Go(e,r,t,n){if(n.overwrite)return A.unlinkSync(t),St(e,r,t,n);if(n.errorOnExist)throw new Error(`'${t}' already exists`)}function St(e,r,t,n){return A.copyFileSync(r,t),n.preserveTimestamps&&Qo(e.mode,r,t),dr(t,e.mode)}function Qo(e,r,t){return Xo(e)&&Ko(t,e),Zo(r,t)}function Xo(e){return(e&128)===0}function Ko(e,r){return dr(e,r|128)}function dr(e,r){return A.chmodSync(e,r)}function Zo(e,r){let t=A.statSync(e);return Wo(r,t.atime,t.mtime)}function ea(e,r,t,n,i){return r?Et(t,n,i):ra(e.mode,t,n,i)}function ra(e,r,t,n){return A.mkdirSync(t),Et(r,t,n),dr(t,e)}function Et(e,r,t){A.readdirSync(e).forEach(n=>ta(n,e,r,t))}function ta(e,r,t,n){let i=Se.join(r,e),o=Se.join(t,e),{destStat:a}=Ee.checkPathsSync(i,o,"copy",n);return zo(a,i,o,n)}function na(e,r,t,n){let i=A.readlinkSync(r);if(n.dereference&&(i=Se.resolve(process.cwd(),i)),e){let o;try{o=A.readlinkSync(t)}catch(a){if(a.code==="EINVAL"||a.code==="UNKNOWN")return A.symlinkSync(i,t);throw a}if(n.dereference&&(o=Se.resolve(process.cwd(),o)),Ee.isSrcSubdir(i,o))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${o}'.`);if(A.statSync(t).isDirectory()&&Ee.isSrcSubdir(o,i))throw new Error(`Cannot overwrite '${o}' with '${i}'.`);return ia(i,t)}else return A.symlinkSync(i,t)}function ia(e,r){return A.unlinkSync(r),A.symlinkSync(e,r)}gt.exports=Vo});var Re=h((ks,xt)=>{"use strict";var oa=U().fromCallback;xt.exports={copy:oa(pt()),copySync:wt()}});var qt=h((Ps,Nt)=>{"use strict";var Ft=I(),Ot=require("path"),x=require("assert"),ge=process.platform==="win32";function Tt(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(t=>{e[t]=e[t]||Ft[t],t=t+"Sync",e[t]=e[t]||Ft[t]}),e.maxBusyTries=e.maxBusyTries||3}function mr(e,r,t){let n=0;typeof r=="function"&&(t=r,r={}),x(e,"rimraf: missing path"),x.strictEqual(typeof e,"string","rimraf: path should be a string"),x.strictEqual(typeof t,"function","rimraf: callback function required"),x(r,"rimraf: invalid options argument provided"),x.strictEqual(typeof r,"object","rimraf: options should be object"),Tt(r),kt(e,r,function i(o){if(o){if((o.code==="EBUSY"||o.code==="ENOTEMPTY"||o.code==="EPERM")&&n<r.maxBusyTries){n++;let a=n*100;return setTimeout(()=>kt(e,r,i),a)}o.code==="ENOENT"&&(o=null)}t(o)})}function kt(e,r,t){x(e),x(r),x(typeof t=="function"),r.lstat(e,(n,i)=>{if(n&&n.code==="ENOENT")return t(null);if(n&&n.code==="EPERM"&&ge)return Pt(e,r,n,t);if(i&&i.isDirectory())return Ae(e,r,n,t);r.unlink(e,o=>{if(o){if(o.code==="ENOENT")return t(null);if(o.code==="EPERM")return ge?Pt(e,r,o,t):Ae(e,r,o,t);if(o.code==="EISDIR")return Ae(e,r,o,t)}return t(o)})})}function Pt(e,r,t,n){x(e),x(r),x(typeof n=="function"),r.chmod(e,438,i=>{i?n(i.code==="ENOENT"?null:t):r.stat(e,(o,a)=>{o?n(o.code==="ENOENT"?null:t):a.isDirectory()?Ae(e,r,t,n):r.unlink(e,n)})})}function bt(e,r,t){let n;x(e),x(r);try{r.chmodSync(e,438)}catch(i){if(i.code==="ENOENT")return;throw t}try{n=r.statSync(e)}catch(i){if(i.code==="ENOENT")return;throw t}n.isDirectory()?Ie(e,r,t):r.unlinkSync(e)}function Ae(e,r,t,n){x(e),x(r),x(typeof n=="function"),r.rmdir(e,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?aa(e,r,n):i&&i.code==="ENOTDIR"?n(t):n(i)})}function aa(e,r,t){x(e),x(r),x(typeof t=="function"),r.readdir(e,(n,i)=>{if(n)return t(n);let o=i.length,a;if(o===0)return r.rmdir(e,t);i.forEach(u=>{mr(Ot.join(e,u),r,c=>{if(!a){if(c)return t(a=c);--o===0&&r.rmdir(e,t)}})})})}function Dt(e,r){let t;r=r||{},Tt(r),x(e,"rimraf: missing path"),x.strictEqual(typeof e,"string","rimraf: path should be a string"),x(r,"rimraf: missing options"),x.strictEqual(typeof r,"object","rimraf: options should be object");try{t=r.lstatSync(e)}catch(n){if(n.code==="ENOENT")return;n.code==="EPERM"&&ge&&bt(e,r,n)}try{t&&t.isDirectory()?Ie(e,r,null):r.unlinkSync(e)}catch(n){if(n.code==="ENOENT")return;if(n.code==="EPERM")return ge?bt(e,r,n):Ie(e,r,n);if(n.code!=="EISDIR")throw n;Ie(e,r,n)}}function Ie(e,r,t){x(e),x(r);try{r.rmdirSync(e)}catch(n){if(n.code==="ENOTDIR")throw t;if(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")ua(e,r);else if(n.code!=="ENOENT")throw n}}function ua(e,r){if(x(e),x(r),r.readdirSync(e).forEach(t=>Dt(Ot.join(e,t),r)),ge){let t=Date.now();do try{return r.rmdirSync(e,r)}catch{}while(Date.now()-t<500)}else return r.rmdirSync(e,r)}Nt.exports=mr;mr.sync=Dt});var we=h((bs,_t)=>{"use strict";var Me=I(),sa=U().fromCallback,Ct=qt();function ca(e,r){if(Me.rm)return Me.rm(e,{recursive:!0,force:!0},r);Ct(e,r)}function fa(e){if(Me.rmSync)return Me.rmSync(e,{recursive:!0,force:!0});Ct.sync(e)}_t.exports={remove:sa(ca),removeSync:fa}});var $t=h((Os,Ut)=>{"use strict";var la=U().fromPromise,At=ie(),It=require("path"),Mt=W(),jt=we(),Lt=la(async function(r){let t;try{t=await At.readdir(r)}catch{return Mt.mkdirs(r)}return Promise.all(t.map(n=>jt.remove(It.join(r,n))))});function Rt(e){let r;try{r=At.readdirSync(e)}catch{return Mt.mkdirsSync(e)}r.forEach(t=>{t=It.join(e,t),jt.removeSync(t)})}Ut.exports={emptyDirSync:Rt,emptydirSync:Rt,emptyDir:Lt,emptydir:Lt}});var Vt=h((Ts,Wt)=>{"use strict";var da=U().fromCallback,Bt=require("path"),ee=I(),Ht=W();function ma(e,r){function t(){ee.writeFile(e,"",n=>{if(n)return r(n);r()})}ee.stat(e,(n,i)=>{if(!n&&i.isFile())return r();let o=Bt.dirname(e);ee.stat(o,(a,u)=>{if(a)return a.code==="ENOENT"?Ht.mkdirs(o,c=>{if(c)return r(c);t()}):r(a);u.isDirectory()?t():ee.readdir(o,c=>{if(c)return r(c)})})})}function ya(e){let r;try{r=ee.statSync(e)}catch{}if(r&&r.isFile())return;let t=Bt.dirname(e);try{ee.statSync(t).isDirectory()||ee.readdirSync(t)}catch(n){if(n&&n.code==="ENOENT")Ht.mkdirsSync(t);else throw n}ee.writeFileSync(e,"")}Wt.exports={createFile:da(ma),createFileSync:ya}});var Qt=h((Ds,Gt)=>{"use strict";var ha=U().fromCallback,Jt=require("path"),re=I(),zt=W(),pa=Z().pathExists,{areIdentical:Yt}=oe();function va(e,r,t){function n(i,o){re.link(i,o,a=>{if(a)return t(a);t(null)})}re.lstat(r,(i,o)=>{re.lstat(e,(a,u)=>{if(a)return a.message=a.message.replace("lstat","ensureLink"),t(a);if(o&&Yt(u,o))return t(null);let c=Jt.dirname(r);pa(c,(y,s)=>{if(y)return t(y);if(s)return n(e,r);zt.mkdirs(c,l=>{if(l)return t(l);n(e,r)})})})})}function Sa(e,r){let t;try{t=re.lstatSync(r)}catch{}try{let o=re.lstatSync(e);if(t&&Yt(o,t))return}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}let n=Jt.dirname(r);return re.existsSync(n)||zt.mkdirsSync(n),re.linkSync(e,r)}Gt.exports={createLink:ha(va),createLinkSync:Sa}});var Kt=h((Ns,Xt)=>{"use strict";var te=require("path"),xe=I(),Ea=Z().pathExists;function ga(e,r,t){if(te.isAbsolute(e))return xe.lstat(e,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),t(n)):t(null,{toCwd:e,toDst:e}));{let n=te.dirname(r),i=te.join(n,e);return Ea(i,(o,a)=>o?t(o):a?t(null,{toCwd:i,toDst:e}):xe.lstat(e,u=>u?(u.message=u.message.replace("lstat","ensureSymlink"),t(u)):t(null,{toCwd:e,toDst:te.relative(n,e)})))}}function wa(e,r){let t;if(te.isAbsolute(e)){if(t=xe.existsSync(e),!t)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}else{let n=te.dirname(r),i=te.join(n,e);if(t=xe.existsSync(i),t)return{toCwd:i,toDst:e};if(t=xe.existsSync(e),!t)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:te.relative(n,e)}}}Xt.exports={symlinkPaths:ga,symlinkPathsSync:wa}});var rn=h((qs,en)=>{"use strict";var Zt=I();function xa(e,r,t){if(t=typeof r=="function"?r:t,r=typeof r=="function"?!1:r,r)return t(null,r);Zt.lstat(e,(n,i)=>{if(n)return t(null,"file");r=i&&i.isDirectory()?"dir":"file",t(null,r)})}function Fa(e,r){let t;if(r)return r;try{t=Zt.lstatSync(e)}catch{return"file"}return t&&t.isDirectory()?"dir":"file"}en.exports={symlinkType:xa,symlinkTypeSync:Fa}});var ln=h((Cs,cn)=>{"use strict";var ka=U().fromCallback,nn=require("path"),V=ie(),on=W(),Pa=on.mkdirs,ba=on.mkdirsSync,an=Kt(),Oa=an.symlinkPaths,Ta=an.symlinkPathsSync,un=rn(),Da=un.symlinkType,Na=un.symlinkTypeSync,qa=Z().pathExists,{areIdentical:sn}=oe();function Ca(e,r,t,n){n=typeof t=="function"?t:n,t=typeof t=="function"?!1:t,V.lstat(r,(i,o)=>{!i&&o.isSymbolicLink()?Promise.all([V.stat(e),V.stat(r)]).then(([a,u])=>{if(sn(a,u))return n(null);tn(e,r,t,n)}):tn(e,r,t,n)})}function tn(e,r,t,n){Oa(e,r,(i,o)=>{if(i)return n(i);e=o.toDst,Da(o.toCwd,t,(a,u)=>{if(a)return n(a);let c=nn.dirname(r);qa(c,(y,s)=>{if(y)return n(y);if(s)return V.symlink(e,r,u,n);Pa(c,l=>{if(l)return n(l);V.symlink(e,r,u,n)})})})})}function _a(e,r,t){let n;try{n=V.lstatSync(r)}catch{}if(n&&n.isSymbolicLink()){let u=V.statSync(e),c=V.statSync(r);if(sn(u,c))return}let i=Ta(e,r);e=i.toDst,t=Na(i.toCwd,t);let o=nn.dirname(r);return V.existsSync(o)||ba(o),V.symlinkSync(e,r,t)}cn.exports={createSymlink:ka(Ca),createSymlinkSync:_a}});var En=h((_s,Sn)=>{"use strict";var{createFile:dn,createFileSync:mn}=Vt(),{createLink:yn,createLinkSync:hn}=Qt(),{createSymlink:pn,createSymlinkSync:vn}=ln();Sn.exports={createFile:dn,createFileSync:mn,ensureFile:dn,ensureFileSync:mn,createLink:yn,createLinkSync:hn,ensureLink:yn,ensureLinkSync:hn,createSymlink:pn,createSymlinkSync:vn,ensureSymlink:pn,ensureSymlinkSync:vn}});var je=h((Ls,gn)=>{function La(e,{EOL:r=`
`,finalEOL:t=!0,replacer:n=null,spaces:i}={}){let o=t?r:"";return JSON.stringify(e,n,i).replace(/\n/g,r)+o}function Ra(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}gn.exports={stringify:La,stripBom:Ra}});var kn=h((Rs,Fn)=>{var de;try{de=I()}catch{de=require("fs")}var Ue=U(),{stringify:wn,stripBom:xn}=je();async function Aa(e,r={}){typeof r=="string"&&(r={encoding:r});let t=r.fs||de,n="throws"in r?r.throws:!0,i=await Ue.fromCallback(t.readFile)(e,r);i=xn(i);let o;try{o=JSON.parse(i,r?r.reviver:null)}catch(a){if(n)throw a.message=`${e}: ${a.message}`,a;return null}return o}var Ia=Ue.fromPromise(Aa);function Ma(e,r={}){typeof r=="string"&&(r={encoding:r});let t=r.fs||de,n="throws"in r?r.throws:!0;try{let i=t.readFileSync(e,r);return i=xn(i),JSON.parse(i,r.reviver)}catch(i){if(n)throw i.message=`${e}: ${i.message}`,i;return null}}async function ja(e,r,t={}){let n=t.fs||de,i=wn(r,t);await Ue.fromCallback(n.writeFile)(e,i,t)}var Ua=Ue.fromPromise(ja);function $a(e,r,t={}){let n=t.fs||de,i=wn(r,t);return n.writeFileSync(e,i,t)}var Ba={readFile:Ia,readFileSync:Ma,writeFile:Ua,writeFileSync:$a};Fn.exports=Ba});var bn=h((As,Pn)=>{"use strict";var $e=kn();Pn.exports={readJson:$e.readFile,readJsonSync:$e.readFileSync,writeJson:$e.writeFile,writeJsonSync:$e.writeFileSync}});var Be=h((Is,Dn)=>{"use strict";var Ha=U().fromCallback,Fe=I(),On=require("path"),Tn=W(),Wa=Z().pathExists;function Va(e,r,t,n){typeof t=="function"&&(n=t,t="utf8");let i=On.dirname(e);Wa(i,(o,a)=>{if(o)return n(o);if(a)return Fe.writeFile(e,r,t,n);Tn.mkdirs(i,u=>{if(u)return n(u);Fe.writeFile(e,r,t,n)})})}function Ja(e,...r){let t=On.dirname(e);if(Fe.existsSync(t))return Fe.writeFileSync(e,...r);Tn.mkdirsSync(t),Fe.writeFileSync(e,...r)}Dn.exports={outputFile:Ha(Va),outputFileSync:Ja}});var qn=h((Ms,Nn)=>{"use strict";var{stringify:za}=je(),{outputFile:Ya}=Be();async function Ga(e,r,t={}){let n=za(r,t);await Ya(e,n,t)}Nn.exports=Ga});var _n=h((js,Cn)=>{"use strict";var{stringify:Qa}=je(),{outputFileSync:Xa}=Be();function Ka(e,r,t){let n=Qa(r,t);Xa(e,n,t)}Cn.exports=Ka});var Rn=h((Us,Ln)=>{"use strict";var Za=U().fromPromise,M=bn();M.outputJson=Za(qn());M.outputJsonSync=_n();M.outputJSON=M.outputJson;M.outputJSONSync=M.outputJsonSync;M.writeJSON=M.writeJson;M.writeJSONSync=M.writeJsonSync;M.readJSON=M.readJson;M.readJSONSync=M.readJsonSync;Ln.exports=M});var Un=h(($s,jn)=>{"use strict";var eu=I(),hr=require("path"),ru=Re().copy,Mn=we().remove,tu=W().mkdirp,nu=Z().pathExists,An=oe();function iu(e,r,t,n){typeof t=="function"&&(n=t,t={}),t=t||{};let i=t.overwrite||t.clobber||!1;An.checkPaths(e,r,"move",t,(o,a)=>{if(o)return n(o);let{srcStat:u,isChangingCase:c=!1}=a;An.checkParentPaths(e,u,r,"move",y=>{if(y)return n(y);if(ou(r))return In(e,r,i,c,n);tu(hr.dirname(r),s=>s?n(s):In(e,r,i,c,n))})})}function ou(e){let r=hr.dirname(e);return hr.parse(r).root===r}function In(e,r,t,n,i){if(n)return yr(e,r,t,i);if(t)return Mn(r,o=>o?i(o):yr(e,r,t,i));nu(r,(o,a)=>o?i(o):a?i(new Error("dest already exists.")):yr(e,r,t,i))}function yr(e,r,t,n){eu.rename(e,r,i=>i?i.code!=="EXDEV"?n(i):au(e,r,t,n):n())}function au(e,r,t,n){ru(e,r,{overwrite:t,errorOnExist:!0},o=>o?n(o):Mn(e,n))}jn.exports=iu});var Vn=h((Bs,Wn)=>{"use strict";var Bn=I(),vr=require("path"),uu=Re().copySync,Hn=we().removeSync,su=W().mkdirpSync,$n=oe();function cu(e,r,t){t=t||{};let n=t.overwrite||t.clobber||!1,{srcStat:i,isChangingCase:o=!1}=$n.checkPathsSync(e,r,"move",t);return $n.checkParentPathsSync(e,i,r,"move"),fu(r)||su(vr.dirname(r)),lu(e,r,n,o)}function fu(e){let r=vr.dirname(e);return vr.parse(r).root===r}function lu(e,r,t,n){if(n)return pr(e,r,t);if(t)return Hn(r),pr(e,r,t);if(Bn.existsSync(r))throw new Error("dest already exists.");return pr(e,r,t)}function pr(e,r,t){try{Bn.renameSync(e,r)}catch(n){if(n.code!=="EXDEV")throw n;return du(e,r,t)}}function du(e,r,t){return uu(e,r,{overwrite:t,errorOnExist:!0}),Hn(e)}Wn.exports=cu});var zn=h((Hs,Jn)=>{"use strict";var mu=U().fromCallback;Jn.exports={move:mu(Un()),moveSync:Vn()}});var Sr=h((Ws,Yn)=>{"use strict";Yn.exports={...ie(),...Re(),...$t(),...En(),...Rn(),...W(),...zn(),...Be(),...Z(),...we()}});var ri=h((zs,ei)=>{"use strict";ei.exports=pu;function hu(e){var r,t="";if(e.isNative()?t="native":e.isEval()?(r=e.getScriptNameOrSourceURL(),r||(t=e.getEvalOrigin())):r=e.getFileName(),r){t+=r;var n=e.getLineNumber();if(n!=null){t+=":"+n;var i=e.getColumnNumber();i&&(t+=":"+i)}}return t||"unknown source"}function pu(e){var r=!0,t=hu(e),n=e.getFunctionName(),i=e.isConstructor(),o=!(e.isToplevel()||i),a="";if(o){var u=e.getMethodName(),c=vu(e);n?(c&&n.indexOf(c)!==0&&(a+=c+"."),a+=n,u&&n.lastIndexOf("."+u)!==n.length-u.length-1&&(a+=" [as "+u+"]")):a+=c+"."+(u||"<anonymous>")}else i?a+="new "+(n||"<anonymous>"):n?a+=n:(r=!1,a+=t);return r&&(a+=" ("+t+")"),a}function vu(e){var r=e.receiver;return r.constructor&&r.constructor.name||null}});var ni=h((Ys,ti)=>{"use strict";ti.exports=Su;function Su(e,r){return e.listeners(r).length}});var xr=h((Gs,wr)=>{"use strict";var Eu=require("events").EventEmitter;ii(wr.exports,"callSiteToString",function(){var r=Error.stackTraceLimit,t={},n=Error.prepareStackTrace;function i(a,u){return u}Error.prepareStackTrace=i,Error.stackTraceLimit=2,Error.captureStackTrace(t);var o=t.stack.slice();return Error.prepareStackTrace=n,Error.stackTraceLimit=r,o[0].toString?gu:ri()});ii(wr.exports,"eventListenerCount",function(){return Eu.listenerCount||ni()});function ii(e,r,t){function n(){var i=t();return Object.defineProperty(e,r,{configurable:!0,enumerable:!0,value:i}),i}Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get:n})}function gu(e){return e.toString()}});var oi=h((exports,module)=>{var callSiteToString=xr().callSiteToString,eventListenerCount=xr().eventListenerCount,relative=require("path").relative;module.exports=depd;var basePath=process.cwd();function containsNamespace(e,r){for(var t=e.split(/[ ,]+/),n=String(r).toLowerCase(),i=0;i<t.length;i++){var o=t[i];if(o&&(o==="*"||o.toLowerCase()===n))return!0}return!1}function convertDataDescriptorToAccessor(e,r,t){var n=Object.getOwnPropertyDescriptor(e,r),i=n.value;return n.get=function(){return i},n.writable&&(n.set=function(a){return i=a}),delete n.value,delete n.writable,Object.defineProperty(e,r,n),n}function createArgumentsString(e){for(var r="",t=0;t<e;t++)r+=", arg"+t;return r.substr(2)}function createStackString(e){var r=this.name+": "+this.namespace;this.message&&(r+=" deprecated "+this.message);for(var t=0;t<e.length;t++)r+=`
    at `+callSiteToString(e[t]);return r}function depd(e){if(!e)throw new TypeError("argument namespace is required");var r=getStack(),t=callSiteLocation(r[1]),n=t[0];function i(o){log.call(i,o)}return i._file=n,i._ignored=isignored(e),i._namespace=e,i._traced=istraced(e),i._warned=Object.create(null),i.function=wrapfunction,i.property=wrapproperty,i}function isignored(e){if(process.noDeprecation)return!0;var r=process.env.NO_DEPRECATION||"";return containsNamespace(r,e)}function istraced(e){if(process.traceDeprecation)return!0;var r=process.env.TRACE_DEPRECATION||"";return containsNamespace(r,e)}function log(e,r){var t=eventListenerCount(process,"deprecation")!==0;if(!(!t&&this._ignored)){var n,i,o,a,u=0,c=!1,y=getStack(),s=this._file;for(r?(a=r,o=callSiteLocation(y[1]),o.name=a.name,s=o[0]):(u=2,a=callSiteLocation(y[u]),o=a);u<y.length;u++)if(n=callSiteLocation(y[u]),i=n[0],i===s)c=!0;else if(i===this._file)s=this._file;else if(c)break;var l=n?a.join(":")+"__"+n.join(":"):void 0;if(!(l!==void 0&&l in this._warned)){this._warned[l]=!0;var f=e;if(f||(f=o===a||!o.name?defaultMessage(a):defaultMessage(o)),t){var m=DeprecationError(this._namespace,f,y.slice(u));process.emit("deprecation",m);return}var p=process.stderr.isTTY?formatColor:formatPlain,d=p.call(this,f,n,y.slice(u));process.stderr.write(d+`
`,"utf8")}}}function callSiteLocation(e){var r=e.getFileName()||"<anonymous>",t=e.getLineNumber(),n=e.getColumnNumber();e.isEval()&&(r=e.getEvalOrigin()+", "+r);var i=[r,t,n];return i.callSite=e,i.name=e.getFunctionName(),i}function defaultMessage(e){var r=e.callSite,t=e.name;t||(t="<anonymous@"+formatLocation(e)+">");var n=r.getThis(),i=n&&r.getTypeName();return i==="Object"&&(i=void 0),i==="Function"&&(i=n.name||i),i&&r.getMethodName()?i+"."+t:t}function formatPlain(e,r,t){var n=new Date().toUTCString(),i=n+" "+this._namespace+" deprecated "+e;if(this._traced){for(var o=0;o<t.length;o++)i+=`
    at `+callSiteToString(t[o]);return i}return r&&(i+=" at "+formatLocation(r)),i}function formatColor(e,r,t){var n="\x1B[36;1m"+this._namespace+"\x1B[22;39m \x1B[33;1mdeprecated\x1B[22;39m \x1B[0m"+e+"\x1B[39m";if(this._traced){for(var i=0;i<t.length;i++)n+=`
    \x1B[36mat `+callSiteToString(t[i])+"\x1B[39m";return n}return r&&(n+=" \x1B[36m"+formatLocation(r)+"\x1B[39m"),n}function formatLocation(e){return relative(basePath,e[0])+":"+e[1]+":"+e[2]}function getStack(){var e=Error.stackTraceLimit,r={},t=Error.prepareStackTrace;Error.prepareStackTrace=prepareObjectStackTrace,Error.stackTraceLimit=Math.max(10,e),Error.captureStackTrace(r);var n=r.stack.slice(1);return Error.prepareStackTrace=t,Error.stackTraceLimit=e,n}function prepareObjectStackTrace(e,r){return r}function wrapfunction(fn,message){if(typeof fn!="function")throw new TypeError("argument fn must be a function");var args=createArgumentsString(fn.length),deprecate=this,stack=getStack(),site=callSiteLocation(stack[1]);site.name=fn.name;var deprecatedfn=eval("(function ("+args+`) {
"use strict"
log.call(deprecate, message, site)
return fn.apply(this, arguments)
})`);return deprecatedfn}function wrapproperty(e,r,t){if(!e||typeof e!="object"&&typeof e!="function")throw new TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(e,r);if(!n)throw new TypeError("must call property on owner object");if(!n.configurable)throw new TypeError("property must be configurable");var i=this,o=getStack(),a=callSiteLocation(o[1]);a.name=r,"value"in n&&(n=convertDataDescriptorToAccessor(e,r,t));var u=n.get,c=n.set;typeof u=="function"&&(n.get=function(){return log.call(i,t,a),u.apply(this,arguments)}),typeof c=="function"&&(n.set=function(){return log.call(i,t,a),c.apply(this,arguments)}),Object.defineProperty(e,r,n)}function DeprecationError(e,r,t){var n=new Error,i;return Object.defineProperty(n,"constructor",{value:DeprecationError}),Object.defineProperty(n,"message",{configurable:!0,enumerable:!1,value:r,writable:!0}),Object.defineProperty(n,"name",{enumerable:!1,configurable:!0,value:"DeprecationError",writable:!0}),Object.defineProperty(n,"namespace",{configurable:!0,enumerable:!1,value:e,writable:!0}),Object.defineProperty(n,"stack",{configurable:!0,enumerable:!1,get:function(){return i!==void 0?i:i=createStackString.call(this,t)},set:function(a){i=a}}),n}});var ui=h((Qs,ai)=>{"use strict";ai.exports=Object.setPrototypeOf||({__proto__:[]}instanceof Array?wu:xu);function wu(e,r){return e.__proto__=r,e}function xu(e,r){for(var t in r)Object.prototype.hasOwnProperty.call(e,t)||(e[t]=r[t]);return e}});var si=h((Xs,Fu)=>{Fu.exports={"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","306":"(Unused)","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Unordered Collection","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"}});var li=h((Ks,fi)=>{"use strict";var ci=si();fi.exports=Y;Y.STATUS_CODES=ci;Y.codes=ku(Y,ci);Y.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0};Y.empty={204:!0,205:!0,304:!0};Y.retry={502:!0,503:!0,504:!0};function ku(e,r){var t=[];return Object.keys(r).forEach(function(i){var o=r[i],a=Number(i);e[a]=o,e[o]=a,e[o.toLowerCase()]=a,t.push(a)}),t}function Y(e){if(typeof e=="number"){if(!Y[e])throw new Error("invalid status code: "+e);return e}if(typeof e!="string")throw new TypeError("code must be a number or string");var r=parseInt(e,10);if(!isNaN(r)){if(!Y[r])throw new Error("invalid status code: "+r);return r}if(r=Y[e.toLowerCase()],!r)throw new Error('invalid status message: "'+e+'"');return r}});var di=h((Zs,Fr)=>{typeof Object.create=="function"?Fr.exports=function(r,t){t&&(r.super_=t,r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:Fr.exports=function(r,t){if(t){r.super_=t;var n=function(){};n.prototype=t.prototype,r.prototype=new n,r.prototype.constructor=r}}});var mi=h((ec,Pr)=>{try{if(kr=require("util"),typeof kr.inherits!="function")throw"";Pr.exports=kr.inherits}catch{Pr.exports=di()}var kr});var hi=h((rc,yi)=>{"use strict";yi.exports=Pu;function Pu(e){return e.split(" ").map(function(r){return r.slice(0,1).toUpperCase()+r.slice(1)}).join("").replace(/[^ _0-9a-z]/gi,"")}});var gi=h((tc,ue)=>{"use strict";var br=oi()("http-errors"),pi=ui(),me=li(),Or=mi(),bu=hi();ue.exports=We;ue.exports.HttpError=Ou();ue.exports.isHttpError=Du(ue.exports.HttpError);qu(ue.exports,me.codes,ue.exports.HttpError);function vi(e){return Number(String(e).charAt(0)+"00")}function We(){for(var e,r,t=500,n={},i=0;i<arguments.length;i++){var o=arguments[i];if(o instanceof Error){e=o,t=e.status||e.statusCode||t;continue}switch(typeof o){case"string":r=o;break;case"number":t=o,i!==0&&br("non-first-argument status code; replace with createError("+o+", ...)");break;case"object":n=o;break}}typeof t=="number"&&(t<400||t>=600)&&br("non-error status code; use only 4xx or 5xx status codes"),(typeof t!="number"||!me[t]&&(t<400||t>=600))&&(t=500);var a=We[t]||We[vi(t)];e||(e=a?new a(r):new Error(r||me[t]),Error.captureStackTrace(e,We)),(!a||!(e instanceof a)||e.status!==t)&&(e.expose=t<500,e.status=e.statusCode=t);for(var u in n)u!=="status"&&u!=="statusCode"&&(e[u]=n[u]);return e}function Ou(){function e(){throw new TypeError("cannot construct abstract class")}return Or(e,Error),e}function Tu(e,r,t){var n=Ei(r);function i(o){var a=o??me[t],u=new Error(a);return Error.captureStackTrace(u,i),pi(u,i.prototype),Object.defineProperty(u,"message",{enumerable:!0,configurable:!0,value:a,writable:!0}),Object.defineProperty(u,"name",{enumerable:!1,configurable:!0,value:n,writable:!0}),u}return Or(i,e),Si(i,n),i.prototype.status=t,i.prototype.statusCode=t,i.prototype.expose=!0,i}function Du(e){return function(t){return!t||typeof t!="object"?!1:t instanceof e?!0:t instanceof Error&&typeof t.expose=="boolean"&&typeof t.statusCode=="number"&&t.status===t.statusCode}}function Nu(e,r,t){var n=Ei(r);function i(o){var a=o??me[t],u=new Error(a);return Error.captureStackTrace(u,i),pi(u,i.prototype),Object.defineProperty(u,"message",{enumerable:!0,configurable:!0,value:a,writable:!0}),Object.defineProperty(u,"name",{enumerable:!1,configurable:!0,value:n,writable:!0}),u}return Or(i,e),Si(i,n),i.prototype.status=t,i.prototype.statusCode=t,i.prototype.expose=!1,i}function Si(e,r){var t=Object.getOwnPropertyDescriptor(e,"name");t&&t.configurable&&(t.value=r,Object.defineProperty(e,"name",t))}function qu(e,r,t){r.forEach(function(i){var o,a=bu(me[i]);switch(vi(i)){case 400:o=Tu(t,a,i);break;case 500:o=Nu(t,a,i);break}o&&(e[i]=o,e[a]=o)}),e["I'mateapot"]=br.function(e.ImATeapot,`"I'mateapot"; use "ImATeapot" instead`)}function Ei(e){return e.substr(-5)!=="Error"?e+"Error":e}});var wi=h((nc,Nr)=>{"use strict";var Ve=require("crypto"),Tr=Ve.randomBytes===Ve.pseudoRandomBytes?1:3;Nr.exports=Cu;Nr.exports.sync=_u;function Cu(e,r){if(r!==void 0&&typeof r!="function")throw new TypeError("argument callback must be a function");if(!r&&!global.Promise)throw new TypeError("argument callback is required");return r?Dr(e,Tr,r):new Promise(function(n,i){Dr(e,Tr,function(a,u){if(a)return i(a);n(u)})})}function _u(e){for(var r=null,t=0;t<Tr;t++)try{return Ve.randomBytes(e)}catch(n){r=n}throw r}function Dr(e,r,t){Ve.randomBytes(e,function(i,o){if(!i)return t(null,o);if(!--r)return t(i);setTimeout(Dr.bind(null,e,r,t),10)})}});var Pi=h((ic,qr)=>{"use strict";var Fi=wi(),Lu=/=+$/,Ru=/\+/g,Au=/\//g;qr.exports=Iu;qr.exports.sync=Mu;function Iu(e,r){if(r!==void 0&&typeof r!="function")throw new TypeError("argument callback must be a function");if(!r&&!global.Promise)throw new TypeError("argument callback is required");return r?xi(e,r):new Promise(function(n,i){xi(e,function(a,u){if(a)return i(a);n(u)})})}function Mu(e){return ki(Fi.sync(e))}function xi(e,r){Fi(e,function(t,n){if(t)return r(t);r(null,ki(n))})}function ki(e){return e.toString("base64").replace(Lu,"").replace(Ru,"-").replace(Au,"_")}});var Ti=h((Cr,Oi)=>{var Je=require("buffer"),G=Je.Buffer;function bi(e,r){for(var t in e)r[t]=e[t]}G.from&&G.alloc&&G.allocUnsafe&&G.allocUnsafeSlow?Oi.exports=Je:(bi(Je,Cr),Cr.Buffer=se);function se(e,r,t){return G(e,r,t)}se.prototype=Object.create(G.prototype);bi(G,se);se.from=function(e,r,t){if(typeof e=="number")throw new TypeError("Argument must not be a number");return G(e,r,t)};se.alloc=function(e,r,t){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=G(e);return r!==void 0?typeof t=="string"?n.fill(r,t):n.fill(r):n.fill(0),n};se.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return G(e)};se.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Je.SlowBuffer(e)}});var Vi=h(Wi=>{"use strict";var j=gi(),ju=Pi(),Pe=require("stream"),ji=require("util"),Ui=require("fs"),Di=require("path"),Uu=require("os"),Xe=Ti().Buffer,ke=require("string_decoder").StringDecoder,$i=0,Ni=1,ze=2,qi=3,Ci=4,_i=5,Li=6,Ri=7,Ai=8,Ii=9,_r=10,Lr=11,Ye=10,Ge=13,$u=32,Qe=45,Bu=58,Hu=97,Wu=122,Vu=/^multipart\/(?:form-data|related)(?:;|$)/i,Mi=/;\s*([^=]+)=(?:"([^"]+)"|([^;]+))/gi,Ju=/(\.[_\-a-zA-Z0-9]{0,16})[\S\s]*/,zu=/\bfilename=(?:"(.*?)"|([!#$%&'*+.0-9A-Z^_`a-z|~-]+))($|; )/i,Yu=4,Gu=/\bname=(?:"([^"]+)"|([!#$%&'*+.0-9A-Z^_`a-z|~-]+))/i;Wi.Form=J;ji.inherits(J,Pe.Writable);function J(e){var r=e||{},t=this;Pe.Writable.call(t,{emitClose:!1}),t.error=null,t.autoFields=!!r.autoFields,t.autoFiles=!!r.autoFiles,t.maxFields=r.maxFields||1e3,t.maxFieldsSize=r.maxFieldsSize||2*1024*1024,t.maxFilesSize=r.maxFilesSize||1/0,t.uploadDir=r.uploadDir||Uu.tmpdir(),t.encoding=r.encoding||"utf8",t.bytesReceived=0,t.bytesExpected=null,t.openedFiles=[],t.totalFieldSize=0,t.totalFieldCount=0,t.totalFileSize=0,t.flushing=0,t.backpressure=!1,t.writeCbs=[],t.emitQueue=[],t.on("newListener",function(n){n==="file"?t.autoFiles=!0:n==="field"&&(t.autoFields=!0)})}J.prototype.parse=function(e,r){var t=!1,n=this,i=!0;if(n.on("close",f),r){n.autoFields=!0,n.autoFiles=!0;var o=function(v){t||(t=!0,process.nextTick(function(){if(i&&e.readable){e.resume(),e.once("end",v);return}v()}))},a={},u={};n.on("error",function(v){o(function(){r(v)})}),n.on("field",function(v,T){var D=a[v]||(a[v]=[]);D.push(T)}),n.on("file",function(v,T){var D=u[v]||(u[v]=[]);D.push(T)}),n.on("close",function(){o(function(){r(null,a,u)})})}n.handleError=d,n.bytesExpected=Qu(e.headers),e.on("end",p),e.on("error",function(v){i=!1,d(v)}),e.on("aborted",m);var c=e._readableState;if(e._decoder||c&&(c.encoding||c.decoder)){E(new Error("request encoding must not be set"));return}var y=e.headers["content-type"];if(!y){E(j(415,"missing content-type header"));return}var s=Vu.exec(y);if(!s){E(j(415,"unsupported content-type"));return}var l;for(Mi.lastIndex=s.index+s[0].length-1;s=Mi.exec(y);)if(s[1].toLowerCase()==="boundary"){l=s[2]||s[3];break}if(!l){E(j(400,"content-type missing boundary"));return}is(n,l),e.pipe(n);function f(){e.removeListener("aborted",m)}function m(){i=!1,n.emit("aborted"),d(new Error("Request aborted"))}function p(){i=!1}function d(v){var T=!n.error;T&&(n.error=v,e.removeListener("aborted",m),e.removeListener("end",p),n.destStream&&Zu(n,n.destStream,v)),Ku(n),T&&n.emit("error",v)}function E(v){process.nextTick(d.bind(null,v))}};J.prototype._write=function(e,r,t){if(!this.error){var n=this,i=0,o=e.length,a=n.index,u=n.index,c=n.state,y=n.lookbehind,s=n.boundary,l=n.boundaryChars,f=n.boundary.length,m=f-1,p=e.length,d,E;for(i=0;i<o;i++)switch(d=e[i],c){case $i:u=0,c=Ni;case Ni:if(u===f-2&&d===Qe){u=1,c=_r;break}else if(u===f-2){if(d!==Ge)return n.handleError(j(400,"Expected CR Received "+d));u++;break}else if(u===f-1){if(d!==Ye)return n.handleError(j(400,"Expected LF Received "+d));u=0,n.onParsePartBegin(),c=ze;break}d!==s[u+2]&&(u=-2),d===s[u+2]&&u++;break;case ze:c=qi,n.headerFieldMark=i,u=0;case qi:if(d===Ge){n.headerFieldMark=null,c=Ri;break}if(u++,d===Qe)break;if(d===Bu){if(u===1){n.handleError(j(400,"Empty header field"));return}n.onParseHeaderField(e.slice(n.headerFieldMark,i)),n.headerFieldMark=null,c=Ci;break}if(E=us(d),E<Hu||E>Wu){n.handleError(j(400,"Expected alphabetic character, received "+d));return}break;case Ci:if(d===$u)break;n.headerValueMark=i,c=_i;case _i:d===Ge&&(n.onParseHeaderValue(e.slice(n.headerValueMark,i)),n.headerValueMark=null,n.onParseHeaderEnd(),c=Li);break;case Li:if(d!==Ye)return n.handleError(j(400,"Expected LF Received "+d));c=ze;break;case Ri:if(d!==Ye)return n.handleError(j(400,"Expected LF Received "+d));var v=n.onParseHeadersEnd(i+1);if(v)return n.handleError(v);c=Ai;break;case Ai:c=Ii,n.partDataMark=i;case Ii:if(a=u,u===0){for(i+=m;i<p&&!(e[i]in l);)i+=f;i-=m,d=e[i]}if(u<f)s[u]===d?(u===0&&(n.onParsePartData(e.slice(n.partDataMark,i)),n.partDataMark=null),u++):u=0;else if(u===f)if(u++,d===Ge)n.partBoundaryFlag=!0;else if(d===Qe){u=1,c=_r;break}else u=0;else if(u-1===f)if(n.partBoundaryFlag){if(u=0,d===Ye){n.partBoundaryFlag=!1,n.onParsePartEnd(),n.onParsePartBegin(),c=ze;break}}else u=0;u>0?y[u-1]=d:a>0&&(n.onParsePartData(y.slice(0,a)),a=0,n.partDataMark=i,i--);break;case _r:if(d!==Qe)return n.handleError(j(400,"Expected HYPHEN Received "+d));if(u===1)n.onParsePartEnd(),c=Lr;else if(u>1)return n.handleError(new Error("Parser has invalid state."));u++;break;case Lr:break;default:n.handleError(new Error("Parser has invalid state."));return}n.headerFieldMark!=null&&(n.onParseHeaderField(e.slice(n.headerFieldMark)),n.headerFieldMark=0),n.headerValueMark!=null&&(n.onParseHeaderValue(e.slice(n.headerValueMark)),n.headerValueMark=0),n.partDataMark!=null&&(n.onParsePartData(e.slice(n.partDataMark)),n.partDataMark=0),n.index=u,n.state=c,n.bytesReceived+=e.length,n.emit("progress",n.bytesReceived,n.bytesExpected),n.backpressure?n.writeCbs.push(t):t()}};J.prototype.onParsePartBegin=function(){Hi(this)};J.prototype.onParseHeaderField=function(e){this.headerField+=this.headerFieldDecoder.write(e)};J.prototype.onParseHeaderValue=function(e){this.headerValue+=this.headerValueDecoder.write(e)};J.prototype.onParseHeaderEnd=function(){this.headerField=this.headerField.toLowerCase(),this.partHeaders[this.headerField]=this.headerValue;var e;this.headerField==="content-disposition"?((e=Gu.exec(this.headerValue))&&(this.partName=e[1]||e[2]||""),this.partFilename=as(this.headerValue)):this.headerField==="content-transfer-encoding"&&(this.partTransferEncoding=this.headerValue.toLowerCase()),this.headerFieldDecoder=new ke(this.encoding),this.headerField="",this.headerValueDecoder=new ke(this.encoding),this.headerValue=""};J.prototype.onParsePartData=function(e){this.partTransferEncoding==="base64"?this.backpressure=!this.destStream.write(e.toString("ascii"),"base64"):this.backpressure=!this.destStream.write(e)};J.prototype.onParsePartEnd=function(){if(this.destStream){Bi(this);var e=this.destStream;process.nextTick(function(){e.end()})}Hi(this)};J.prototype.onParseHeadersEnd=function(e){var r=this;switch(r.partTransferEncoding){case"binary":case"7bit":case"8bit":r.partTransferEncoding="binary";break;case"base64":break;default:return j(400,"unknown transfer-encoding: "+r.partTransferEncoding)}if(r.totalFieldCount+=1,r.totalFieldCount>r.maxFields)return j(413,"maxFields "+r.maxFields+" exceeded.");r.destStream=new Pe.PassThrough,r.destStream.on("drain",function(){Bi(r)}),r.destStream.headers=r.partHeaders,r.destStream.name=r.partName,r.destStream.filename=r.partFilename,r.destStream.byteOffset=r.bytesReceived+e;var t=r.destStream.headers["content-length"];r.destStream.byteCount=t?parseInt(t,10):r.bytesExpected?r.bytesExpected-r.destStream.byteOffset-r.boundary.length-Yu:void 0,r.destStream.filename==null&&r.autoFields?ns(r,r.destStream):r.destStream.filename!=null&&r.autoFiles?ts(r,r.destStream):rs(r,r.destStream)};ji.inherits(Rr,Pe.Transform);function Rr(e){Pe.Transform.call(this),this.bytes=0,this.limit=e}Rr.prototype._transform=function(r,t,n){var i=Xe.isBuffer(r)?r.length:Xe.byteLength(r,t);if(this.bytes+=i,this.bytes>this.limit){var o=new Error("maximum file length exceeded");o.code="ETOOBIG",n(o)}else this.push(r),this.emit("progress",this.bytes,i),n()};function Bi(e){e.writeCbs.forEach(function(r){process.nextTick(r)}),e.writeCbs=[],e.backpressure=!1}function Qu(e){var r=e["content-length"];return r?parseInt(r,10):e["transfer-encoding"]==null?0:null}function Ke(e){e.flushing+=1}function Ze(e){if(e.flushing-=1,e.flushing<0){e.handleError(new Error("unexpected endFlush"));return}Xu(e)}function Xu(e){e.flushing>0||e.error||er(e)(function(){process.nextTick(function(){e.emit("close")})})}function Ku(e){e.openedFiles.forEach(function(r){r.ws.destroy(),Ui.unlink(r.publicFile.path,function(t){t&&e.handleError(t)})}),e.openedFiles=[]}function er(e,r){var t={cb:null,ee:r,err:null};return e.emitQueue.push(t),function(n){t.cb=n,es(e)}}function Zu(e,r,t){var n=e.emitQueue.filter(function(i){return i.ee===r});if(n.length===0){r.emit("error",t);return}n.forEach(function(i){i.err=t})}function es(e){for(;e.emitQueue.length>0&&e.emitQueue[0].cb;){var r=e.emitQueue.shift();r.cb(),r.err&&r.ee.emit("error",r.err)}}function rs(e,r){Ke(e);var t=er(e,r);r.on("end",function(){Ze(e)}),t(function(){e.emit("part",r)})}function ts(e,r){if(!e.error){var t={fieldName:r.name,originalFilename:r.filename,path:os(e.uploadDir,r.filename),headers:r.headers,size:0},n={publicFile:t,ls:null,ws:Ui.createWriteStream(t.path,{flags:"wx"})};e.openedFiles.push(n),Ke(e);var i=er(e,r);r.on("error",function(o){e.handleError(o)}),n.ws.on("error",function(o){e.handleError(o)}),n.ws.on("open",function(){n.ls=new Rr(e.maxFilesSize-e.totalFileSize),n.ls.pipe(n.ws),n.ls.on("error",function(o){e.handleError(o.code==="ETOOBIG"?j(413,o.message,{code:o.code}):o)}),n.ls.on("progress",function(o,a){t.size=o,e.totalFileSize+=a}),n.ws.on("close",function(){e.error||(i(function(){e.emit("file",r.name,t)}),Ze(e))}),r.pipe(n.ls)})}}function ns(e,r){var t="",n=new ke(e.encoding);Ke(e);var i=er(e,r);r.on("error",function(o){e.handleError(o)}),r.on("readable",function(){var o=r.read();if(!!o){if(e.totalFieldSize+=o.length,e.totalFieldSize>e.maxFieldsSize){e.handleError(j(413,"maxFieldsSize "+e.maxFieldsSize+" exceeded"));return}t+=n.write(o)}}),r.on("end",function(){i(function(){e.emit("field",r.name,t)}),Ze(e)})}function Hi(e){e.partHeaders={},e.partName=null,e.partFilename=null,e.partTransferEncoding="binary",e.destStream=null,e.headerFieldDecoder=new ke(e.encoding),e.headerField="",e.headerValueDecoder=new ke(e.encoding),e.headerValue=""}function is(e,r){e.boundary=Xe.alloc(r.length+4),e.boundary.write(`\r
--`,0,r.length+4,"ascii"),e.boundary.write(r,4,r.length,"ascii"),e.lookbehind=Xe.alloc(e.boundary.length+8),e.state=$i,e.boundaryChars={};for(var t=0;t<e.boundary.length;t++)e.boundaryChars[e.boundary[t]]=!0;e.index=null,e.partBoundaryFlag=!1,Ke(e),e.on("finish",function(){e.state!==Lr&&e.handleError(j(400,"stream ended unexpectedly")),Ze(e)})}function os(e,r){var t=Di.extname(r).replace(Ju,"$1"),n=ju.sync(18)+t;return Di.join(e,n)}function as(e){var r=zu.exec(e);if(!r)if(r=e.match(/\bfilename\*=utf-8''(.*?)($|; )/i),r)r[1]=decodeURI(r[1]);else return;var t=r[1]||r[2]||"";return t=t.replace(/%22|\\"/g,'"'),t=t.replace(/&#([\d]{4});/g,function(n,i){return String.fromCharCode(i)}),t.substr(t.lastIndexOf("\\")+1)}function us(e){return e|32}});var zi=Q(require("http")),Yi=Q(require("path"));var z=Q(require("path")),H=Q(Sr());var Gn=Q(require("path")),ae=Q(Sr()),Qn=Q(require("url"));function Er(e){return new Promise(r=>{let t="";e.on("data",n=>{t+=n}),e.on("end",()=>{r(JSON.parse(t))})})}function gr(e){return new Promise(r=>{let t=Qn.default.parse(e.url,!0);r(t)})}var yu=(e,r)=>new Promise(t=>{let n=ae.default.createReadStream(e);n.on("end",()=>{ae.default.unlinkSync(e),t(!0)}),n.pipe(r)});async function Xn(e,r,t){await Promise.all(e.map(async(n,i)=>{let o=0;return t.forEach((a,u)=>{u<=i&&(o+=a)}),yu(n,ae.default.createWriteStream(r,{start:o}))}))}async function Kn(e){if(ae.default.existsSync(e)){let t=await ae.default.readdir(e),n=Gn.default.resolve(e,t[t.length-1]);return ae.default.unlinkSync(n),t.pop(),t.filter(i=>i[0]!==".")}else return[]}function He(e){return e.slice(e.lastIndexOf("."),e.length)}var Zn=e=>new Promise(r=>setTimeout(r,e*1e3));var Ji=Q(Vi()),be=class{UPLOAD_DIR;constructor(r){this.UPLOAD_DIR=r}async mergeFileChunk(r,t,n){let i=z.default.resolve(this.UPLOAD_DIR,t);await Zn(1);let o=await H.default.readdir(i);o.sort((a,u)=>Number(a.split("-")[1])-Number(u.split("-")[1])),o=o.map(a=>z.default.resolve(i,a)),await Xn(o,r,n)}async handleVerify(r,t){let n=await Er(r),{filename:i,hash:o}=n,a=He(i),u=z.default.resolve(this.UPLOAD_DIR,`${o}${a}`),c=!1,y=[];H.default.existsSync(u)?c=!0:y=await Kn(z.default.resolve(this.UPLOAD_DIR,o)),t.end(JSON.stringify({code:200,uploaded:c,uploadedList:y}))}async handleMerge(r,t){let n=await Er(r),{fileHash:i,filename:o,size:a}=n,u=He(o),c=z.default.resolve(this.UPLOAD_DIR,`${i}${u}`);await this.mergeFileChunk(c,i,a);let y=z.default.resolve(this.UPLOAD_DIR,i);H.default.rmdirSync(y),t.end(JSON.stringify({code:200,message:"file merged success"}))}async handleUpload(r,t){new Ji.default.Form().parse(r,async(i,o,a)=>{if(i){console.log(i);return}let[u]=a.chunk,[c]=o.hash,[y]=o.filename,[s]=o.fileHash,l=z.default.resolve(this.UPLOAD_DIR,`${s}${He(y)}`),f=z.default.resolve(this.UPLOAD_DIR,s);if(H.default.existsSync(l)){t.end(JSON.stringify({code:200,message:"file is exits"}));return}H.default.existsSync(f)||await H.default.mkdirs(f),await H.default.move(u.path,`${f}/${c}`),t.end(JSON.stringify({code:200,message:"received file chunk"}))})}async getFileSize(r,t){let n=await gr(r),i=z.default.resolve(this.UPLOAD_DIR,n.query.filename);if(H.default.existsSync(i)){let o=H.default.statSync(i).size;t.end(JSON.stringify({code:200,size:o}))}else t.end(JSON.stringify({code:500,message:"file not exits"}))}async handleDownload(r,t){let n=await gr(r),i=z.default.resolve(this.UPLOAD_DIR,n.query.filename);H.default.existsSync(i)&&H.default.createReadStream(i).pipe(t)}};var Gi=zi.default.createServer(),Oe=new be(Yi.default.resolve(__dirname,"../target"));Gi.on("request",async(e,r)=>{if(r.setHeader("Access-Control-Allow-Origin","*"),r.setHeader("Access-Control-Allow-Headers","*"),e.method==="OPTIONS"){r.status=200,r.end();return}if(e.url==="/"){r.status=200,r.end(`
      <!DOCTYPE html>
      <html lang="en">
      <head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <meta http-equiv="X-UA-Compatible" content="ie=edge">
          <title>Document</title>
      </head>
      <body>
          <h1>Hello World</h1>
      </body>
      </html>
    `);return}if(e.method==="POST"){if(e.url=="/upload"){await Oe.handleUpload(e,r);return}if(e.url=="/merge"){await Oe.handleMerge(e,r);return}if(e.url=="/verify"){await Oe.handleVerify(e,r);return}if(e.url==="/download"){await Oe.handleDownload(e,r);return}}if(e.method==="GET"&&e.url?.indexOf("/download")===0){await Oe.handleDownload(e,r);return}});Gi.listen(4001,()=>console.log("\u6B63\u5728\u76D1\u542C 4001 \u7AEF\u53E3"));
/*!
 * depd
 * Copyright(c) 2014 Douglas Christopher Wilson
 * MIT Licensed
 */
/*!
 * depd
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */
/*!
 * depd
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */
/*!
 * depd
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
/*!
 * http-errors
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */
/*!
 * multiparty
 * Copyright(c) 2013 Felix Geisendörfer
 * Copyright(c) 2014 Andrew Kelley
 * Copyright(c) 2014 Douglas Christopher Wilson
 * MIT Licensed
 */
/*!
 * random-bytes
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */
/*!
 * statuses
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */
/*!
 * toidentifier
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */
/*!
 * uid-safe
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015-2017 Douglas Christopher Wilson
 * MIT Licensed
 */
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
